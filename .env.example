# TERP Environment Variables
# Copy this file to .env and fill in your actual values
# These will be overridden by DigitalOcean environment variables in production

# =============================================================================
# REQUIRED - Application will not function without these
# =============================================================================

# Database Connection
# Format: mysql://user:password@host:port/database
# Example: mysql://doadmin:password@host.db.ondigitalocean.com:25060/defaultdb
DATABASE_URL=mysql://user:password@localhost:3306/terp

# JWT Secret for authentication tokens
# Generate with: openssl rand -base64 32
# SECURITY: Must be at least 32 characters, random, and kept secret
JWT_SECRET=your_jwt_secret_here_minimum_32_characters

# =============================================================================
# AUTHENTICATION - Clerk (Optional but recommended for production)
# =============================================================================

# Clerk Authentication Keys
# Get these from https://dashboard.clerk.com/
# Used for user authentication and session management
VITE_CLERK_PUBLISHABLE_KEY=pk_test_your_publishable_key_here
CLERK_SECRET_KEY=sk_test_your_secret_key_here

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application Identity
VITE_APP_TITLE=TERP
VITE_APP_LOGO=
VITE_APP_ID=terp-app

# Node Environment
# Options: development, production, test
NODE_ENV=development

# Server Port
# Default: 3000
# DigitalOcean will override this in production
PORT=3000

# Application URLs
# Used for generating public links and email links
# Development: http://localhost:5173
# Production: Set to your actual domain
APP_URL=http://localhost:5173
PUBLIC_URL=http://localhost:5173

# =============================================================================
# OPTIONAL - External Services and Integrations
# =============================================================================

# Argos Visual Testing (for E2E tests)
# Get from https://argos-ci.com/
# Only needed if running visual regression tests
ARGOS_TOKEN=your_argos_token_here

# Sentry Error Tracking (production monitoring)
# Get from https://sentry.io/
# Only needed in production for error tracking
#
# SENTRY_DSN - Server-side DSN for Node.js error tracking
# VITE_SENTRY_DSN - Client-side DSN (exposed to browser via Vite)
# Note: For security, you may want to use a different DSN for client vs server
#
SENTRY_DSN=
VITE_SENTRY_DSN=

# Sentry Source Map Upload (for readable stack traces in production)
# Get auth token from: https://sentry.io/settings/auth-tokens/
# These are only needed during build to upload source maps
# IMPORTANT: Do not commit actual values - set in CI/CD environment
#
SENTRY_ORG=
SENTRY_PROJECT=
SENTRY_AUTH_TOKEN=

# GitHub Webhook Secret (for CI/CD integrations)
# Used to verify webhook requests from GitHub
GITHUB_WEBHOOK_SECRET=

# =============================================================================
# ADVANCED - Custom API Integrations
# =============================================================================

# Built-in Forge API (internal service)
# Only needed if using custom Forge API integration
BUILT_IN_FORGE_API_URL=
BUILT_IN_FORGE_API_KEY=

# =============================================================================
# EMAIL/SMS SERVICE PROVIDERS (Optional - only if enabling email/SMS features)
# =============================================================================

# Email Service Provider (Resend recommended)
# Get API key from: https://resend.com/
# Required if FEATURE_EMAIL_ENABLED=true
# RESEND_API_KEY=re_your_api_key_here

# Alternative: SendGrid
# SENDGRID_API_KEY=SG.your_api_key_here

# SMS Service Provider (Twilio recommended)
# Get credentials from: https://console.twilio.com/
# Required if FEATURE_SMS_ENABLED=true
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=your_auth_token_here
# TWILIO_PHONE_NUMBER=+1234567890

# Owner/Admin User ID
# OpenID of the primary owner/admin user
OWNER_OPEN_ID=

# =============================================================================
# DATABASE BACKUP CONFIGURATION
# =============================================================================

# S3 bucket for storing backups (optional - if not set, backups stay local)
BACKUP_S3_BUCKET=
BACKUP_S3_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Live Catalog Feature
# Set to "true" to enable live catalog functionality
FEATURE_LIVE_CATALOG=false

# Email Integration (optional - requires external service)
# Set to "true" to enable email sending for receipts and notifications
# Requires configuration of email service provider (e.g., Resend, SendGrid)
FEATURE_EMAIL_ENABLED=false

# SMS Integration (optional - requires external service)
# Set to "true" to enable SMS sending for receipts and notifications
# Requires configuration of SMS service provider (e.g., Twilio)
FEATURE_SMS_ENABLED=false

# =============================================================================
# TEST/DEVELOPMENT AUTH
# =============================================================================

# Enable test auth token endpoint (for AI agent E2E testing)
# Set to "true" to enable auth.getTestToken endpoint in production
# In non-production environments (NODE_ENV !== 'production'), this is enabled by default
# WARNING: Only enable in development/staging, never in customer production
ENABLE_TEST_AUTH=false

# =============================================================================
# QA AUTHENTICATION
# =============================================================================

# Enable QA authentication for deterministic RBAC validation testing
# When enabled, provides login endpoints for QA test accounts:
#   - qa.superadmin@terp.test (Super Admin)
#   - qa.salesmanager@terp.test (Sales Manager)
#   - qa.salesrep@terp.test (Sales Rep)
#   - qa.inventory@terp.test (Inventory Manager)
#   - qa.fulfillment@terp.test (Fulfillment/Warehouse)
#   - qa.accounting@terp.test (Accounting Manager)
#   - qa.auditor@terp.test (Read-Only Auditor)
#
# Password for all QA accounts: TerpQA2026!
#
# SECURITY: This is automatically disabled in production (NODE_ENV=production)
# even if set to true. Only use in dev/staging/QA environments.
#
# See docs/auth/QA_AUTH.md for full documentation.
QA_AUTH_ENABLED=false

# =============================================================================
# ADMIN SETUP
# =============================================================================

# Admin Setup Key - Required for one-time admin promotion endpoints
# Generate with: openssl rand -base64 32
# SECURITY: Must be set to enable admin setup functionality
# This key is used by server/routers/adminSetup.ts endpoints
# WARNING: Keep this secret and never commit actual values
ADMIN_SETUP_KEY=your-secure-random-key-here

# ==============================================================================
# DEPLOYMENT & MONITORING (INFRA-004)
# ==============================================================================

# Application URL for health checks (required for deployment monitoring)
# Development: http://localhost:5173
# Production: https://your-app.ondigitalocean.app
APP_URL=http://localhost:5173

# Enable automatic rollback on failed deployments (default: false)
# Set to "true" to automatically rollback to previous deployment if health checks fail
# Requires DIGITALOCEAN_TOKEN and DIGITALOCEAN_APP_ID to be set
ENABLE_AUTO_ROLLBACK=false

# Digital Ocean API credentials (required for auto-rollback and deployment monitoring)
# Get token from: https://cloud.digitalocean.com/account/api/tokens
# Get app ID from: doctl apps list
DIGITALOCEAN_TOKEN=
DIGITALOCEAN_APP_ID=

# Slack webhook for deployment alerts (optional)
# Get from: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=

# =============================================================================
# NOTES
# =============================================================================

# 1. NEVER commit the .env file to git (it's in .gitignore)
# 2. In production, set these via DigitalOcean App Platform environment variables
# 3. Vite exposes only VITE_* prefixed variables to the client
# 4. All other variables are server-side only
# 5. Always use strong, randomly generated secrets in production
# 6. Rotate secrets regularly, especially after team member changes

