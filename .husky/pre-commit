#!/usr/bin/env sh
# Pre-commit hook for TERP (Streamlined v2.0)
# Only essential checks - no ceremony

# Check for schema changes without migrations (warning only)
if git diff --cached --name-only | grep -q "drizzle/schema.ts"; then
  if ! git diff --cached --name-only | grep -q "drizzle/migrations/"; then
    echo ""
    echo "⚠️  WARNING: drizzle/schema.ts changed but no migration file found!"
    echo "   Run: pnpm db:generate (if schema changed)"
    echo "   Skip: git commit --no-verify (if non-breaking change)"
    echo ""
  fi
fi

# Run lint-staged (formatting + linting only)
npx lint-staged
