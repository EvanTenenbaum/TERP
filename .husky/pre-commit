#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run QA standards check first
.husky/pre-commit-qa-check.sh || exit 1

# Then run lint-staged
npx lint-staged

# Validate roadmap ONLY if it changed (conditional validation for performance)
if git diff --cached --name-only | grep -q "docs/roadmaps/MASTER_ROADMAP.md"; then
  echo "üîç Validating MASTER_ROADMAP.md..."
  pnpm roadmap validate --incremental || exit 1
fi
