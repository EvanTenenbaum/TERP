# Session: BUG-007 - Missing Permissions & Safety Checks

**Session ID:** Session-20251124-BUG-007-78a29f8b  
**Task:** BUG-007  
**Started:** 2025-11-24  
**Status:** ‚è≥ IN PROGRESS  
**Branch:** bug-007-permissions-safety-checks

---

## Objective

Replace all `window.confirm()` calls with proper dialog components and add confirmation dialogs for all destructive actions that currently lack them.

---

## Progress

### Phase 1: Pre-Flight Check
- [x] Session file created
- [ ] Session registered in ACTIVE_SESSIONS.md
- [ ] Environment verified
- [ ] Permissions verified

### Phase 2: Session Startup
- [ ] Feature branch created
- [ ] Roadmap status updated
- [ ] Session file updated

### Phase 3: Development
- [ ] All window.confirm instances identified (25 found)
- [ ] AlertDialog component imported
- [ ] Replacements implemented
- [ ] Destructive actions without confirmation identified
- [ ] Confirmations added
- [ ] Testing completed

### Phase 4: Completion
- [ ] Completion report created
- [ ] Roadmap updated
- [ ] Changes committed and pushed
- [ ] Session archived

---

## Files to Modify

### High Priority (from roadmap)
- `client/src/components/vip-portal/LiveCatalog.tsx` - Clear draft confirmation (line 260)
- `client/src/components/orders/OrderPreview.tsx` - Clear All button (line ~316)

### All window.confirm instances found:
1. `client/src/pages/VendorsPage.tsx` - Delete vendor
2. `client/src/pages/TodoListsPage.tsx` - Confirmation
3. `client/src/pages/OrderCreatorPage.tsx` - Finalize order
4. `client/src/pages/TodoListDetailPage.tsx` - Delete task, other
5. `client/src/pages/Settings.tsx` - Update category/grade
6. `client/src/pages/Quotes.tsx` - Convert quote
7. `client/src/components/workflow/WorkflowSettings.tsx` - Delete workflow status
8. `client/src/components/vip-portal/MarketplaceSupply.tsx` - Cancel listing
9. `client/src/components/vip-portal/MarketplaceNeeds.tsx` - Cancel need
10. `client/src/components/vip-portal/LiveCatalogConfig.tsx` - Deactivate price alert
11. `client/src/components/vip-portal/LiveCatalog.tsx` - Clear draft, delete view, remove price alert
12. `client/src/components/todos/ShareListModal.tsx` - Remove member
13. `client/src/components/settings/rbac/UserRoleManagement.tsx` - Remove role
14. `client/src/components/settings/rbac/RoleManagement.tsx` - Delete role
15. `client/src/components/settings/rbac/PermissionAssignment.tsx` - Remove permission
16. `client/src/components/inventory/SavedViewsDropdown.tsx` - Delete view
17. `client/src/components/inbox/InboxItem.tsx` - Delete item
18. `client/src/components/dashboard/v3/CustomizationPanel.tsx` - Reset dashboard
19. `client/src/components/comments/CommentItem.tsx` - Delete comment
20. `client/src/components/VendorNotesDialog.tsx` - Delete note
21. `client/src/components/UserManagement.tsx` - Delete user

---

## Notes

- Total instances found: 25
- Need to check for destructive actions without confirmation (Clear All in OrderPreview)
- Use AlertDialog from `@/components/ui/alert-dialog`
- Follow existing patterns from BulkConfirmDialog

---

**Last Updated:** 2025-11-24


