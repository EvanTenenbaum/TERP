# QA-053: Retrofit Architectural Fixes to Core Workflows

**Priority:** P0 (Critical)
**Effort:** 30-40h
**Status:** Not Started

---

## Task Description

Systematically apply the new architectural components (`useAppMutation`, `FormSubmitButton`) to all broken core workflows to fix silent failures and provide a consistent user experience.

## Problem

The foundational tools for robust error handling and loading states have been built, but they have not been applied to the existing broken forms. This leaves critical workflows like client creation, inventory intake, and quote creation in a non-functional state.

## Acceptance Criteria

- [ ] `useAppMutation` is implemented for all mutations in the following workflows:
    - Client Creation
    - Inventory Batch Creation
    - Quote Creation
    - Purchase Order Creation
- [ ] `FormSubmitButton` is used for all form submissions in these workflows.
- [ ] All forms provide clear loading indicators and error messages.
- [ ] Silent failures are eliminated.

## Implementation Guide

1.  **Client Creation:**
    -   In `client/src/components/clients/AddClientWizard.tsx`, refactor the form submission logic to use `useAppMutation` and `FormSubmitButton`.
2.  **Inventory Intake:**
    -   In `client/src/components/inventory/PurchaseModal.tsx`, refactor the form submission logic.
3.  **Quote Creation:**
    -   In the quote creation form, refactor the "Save as Draft" and "Preview & Finalize" actions.
4.  **Purchase Order Creation:**
    -   In the PO creation modal, refactor the form submission logic.

## Verification

-   Attempt to create a client with invalid data and verify that field-level errors are shown.
-   Attempt to create an inventory batch and verify the loading spinner appears.
-   Attempt to save a quote and verify a success or error toast is displayed.
