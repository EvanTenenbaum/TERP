# ST-032: Mega QA - Global Oracles + Evidence Capture (No Self-Heal)

## Context

Mega QA requires uniform invariants and evidence capture so failures are actionable by AI-only reviewers.

## Implementation Guide

- Add a shared oracle library (e.g., `tests-e2e/utils/mega-oracles.ts`) that provides:
  - crash detection (pageerror/unhandledrejection)
  - console error capture and classification
  - network failure capture (status >=400 for key calls, timeouts)
  - “infinite spinner” detection with bounded wait policy
  - RBAC enforcement checks for selected actions
- Integrate oracles into:
  - deterministic must-hit suite
  - randomized journeys
  - non-functional suites (perf/a11y/security/resilience)
- Ensure artifacts are captured on failure:
  - Playwright trace
  - screenshot
  - relevant network excerpt
  - URL history
- Do not mutate tests or selectors. Record evidence only.

## Acceptance Notes (for AI-only review)

- Every failure should include: where, why (error class), and how to replay (seed/persona/test).
