# ST-026: Mega QA - Normalize Test DB Reset + E2E Global Setup

## Context

Mega QA depends on a deterministic, reproducible environment. Today, E2E setup/docs reference inconsistent DB reset commands, which risks flake and “can’t reproduce” failures.

## Implementation Guide

- Identify the canonical test DB lifecycle commands in `package.json` (`test:env:*`, `test:db:*`).
- Update `testing/setup-e2e.ts` to call only the canonical reset/seed command for the `full` scenario.
- Update `testing/setup-integration.ts` similarly if it references stale commands.
- Update `docs/testing/*` to remove stale command references and replace with canonical commands.
- Add a fast preflight sanity check that validates seeded data is usable for E2E (e.g., key lists return >0 rows under `full`).
- Verify locally:
  - `pnpm test:env:up`
  - `pnpm test:db:reset:full`
  - `pnpm test:e2e --headed` (or a single spec)

## Acceptance Notes (for AI-only review)

- Evidence should include the exact command used for reset/seed in setup scripts.
- Docs must match the actual executable scripts.
- Any changes must keep CI non-interactive behavior.
