# QA-058: Fix Quote Creation and Implement Sales Features

**Priority:** P1 (High)
**Effort:** 25-35h
**Status:** Not Started

---

## Task Description

Fix the broken quote creation workflow and implement missing sales features like discounts and notes. The core sales workflow is currently blocked.

## Problem

Sales representatives cannot create quotes, which is a fundamental step in the sales process. The "Save as Draft" and "Preview & Finalize" functions are non-functional, and essential features like applying discounts are missing.

## Acceptance Criteria

- [ ] The quote save functionality is fixed and quotes are persisted to the database.
- [ ] Users can apply order-level discounts.
- [ ] Users can add notes and terms to a quote.
- [ ] A functional workflow to convert a quote to an order is implemented.
- [ ] The misleading "Create Sales Order" title on the quote creation page is corrected.

## Implementation Guide

1.  **Backend:**
    -   Debug and fix the `createQuote` tRPC procedure.
    -   Add support for discounts and notes in the `quotes` table and creation procedure.
    -   Implement a `convertQuoteToOrder` procedure.
2.  **Frontend:**
    -   In the quote creation form, fix the save functionality.
    -   Add UI elements for applying discounts and adding notes.
    -   Implement the frontend logic for the quote-to-order conversion.
    -   Change the page title to be more accurate (e.g., "Create Quote/Order").

## Verification

-   Create a quote and save it as a draft. Verify it appears in the quotes list.
-   Add a discount to a quote and verify the total is recalculated correctly.
-   Convert a quote to an order and verify that a new order is created.
