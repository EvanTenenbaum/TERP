# SEC-011: Reduce VIP Portal Session Duration

## Implementation Guide

### Problem
VIP Portal sessions are valid for 30 days (line ~381 in vipPortal.ts), which is excessive and increases the window for compromised credentials.

### Current State
```typescript
sessionExpiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days
```

### Solution
1. Reduce session duration to 7-14 days
2. Implement refresh token pattern for extended sessions
3. Add session revocation on logout (clear DB record)

### Files to Modify
- `server/routers/vipPortal.ts`

### Implementation
```typescript
// Reduce to 14 days
sessionExpiresAt: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000)

// Add logout session cleanup
logout: vipPortalProcedure.mutation(async ({ ctx }) => {
  await db.delete(vipPortalAuth).where(eq(vipPortalAuth.clientId, ctx.vipPortalClientId));
})
```

### Acceptance Criteria
- Session duration reduced to 14 days or less
- Old sessions properly revoked on logout
- No impact on active legitimate users
