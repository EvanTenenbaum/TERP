# ST-027: Mega QA - Add Self-Contained Runner CLI (`pnpm mega:qa`)

## Context

We need a single command that any AI engineer can run to execute the full Mega QA gate and receive a standardized report bundle at the end.

## Implementation Guide

- Create `scripts/mega-qa/index.ts` as the orchestration entrypoint.
- Add CLI flags (non-interactive defaults):
  - `--scenario` (`full|edge|chaos`)
  - `--journeys` (default 100)
  - `--seed` (optional; if missing, generate and print it)
  - `--base-url` (default from Playwright config or env)
  - `--mode` (`default|soak|contracts|perf|a11y|visual|security|resilience`)
  - `--out-dir` (default under `qa-results/mega-qa/<run-id>`)
- Orchestrate:
  - Environment preflight + DB reset/seed (delegates to ST-026 canonical scripts)
  - Playwright suites execution (must-hit + journeys + optional suites)
  - Post-processing: assemble Mega QA bundle (delegates to ST-028)
- Add `package.json` scripts:
  - `mega:qa` (default)
  - `mega:qa:local` (headed, fewer retries, verbose)
  - `mega:qa:ci` (headless, strict, deterministic)
- Exit codes:
  - `0` pass
  - `1` failures (tests/invariants/contracts/etc.)
  - `2` environment/preflight failure (DB not up, seed failed, server not reachable)

## Acceptance Notes (for AI-only review)

- The CLI must print the final bundle path on stdout.
- The run must be reproducible from bundle metadata (seed, scenario, git SHA).
- No “self-healing” behavior; only evidence capture.
