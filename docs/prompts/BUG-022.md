# BUG-022: Theme Toggle Not Implemented

**Repository:** https://github.com/EvanTenenbaum/TERP
**Task ID:** BUG-022
**Priority:** MEDIUM
**Estimated Time:** 4-8 hours
**Module:** `client/src/components/`, Settings page

---

## Context

No light/dark mode theme toggle functionality is available in the application. Users cannot switch between light and dark themes. The application may have ThemeProvider infrastructure but no visible toggle control.

## Implementation Guide

### Step 1: Investigate Current Theme Infrastructure

Check for existing theme setup:

```bash
grep -r "ThemeProvider\|useTheme\|dark\|light" client/src --include="*.tsx" --include="*.ts"
grep -r "theme" client/src/components
```

Check CSS variables in `client/src/index.css` or similar.

### Step 2: Verify ThemeProvider Setup

Ensure `next-themes` or similar provider is configured:

```tsx
// In App.tsx or main.tsx
import { ThemeProvider } from "next-themes";

<ThemeProvider attribute="class" defaultTheme="system">
  <App />
</ThemeProvider>;
```

### Step 3: Create Theme Toggle Component

Create `client/src/components/ThemeToggle.tsx`:

```tsx
import { useTheme } from "next-themes";
import { Moon, Sun } from "lucide-react";
import { Button } from "@/components/ui/button";

export function ThemeToggle() {
  const { theme, setTheme } = useTheme();

  return (
    <Button
      variant="ghost"
      size="icon"
      onClick={() => setTheme(theme === "dark" ? "light" : "dark")}
    >
      <Sun className="h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
      <Moon className="absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
      <span className="sr-only">Toggle theme</span>
    </Button>
  );
}
```

### Step 4: Add Toggle to UI

Add theme toggle to user dropdown or header:

- `client/src/components/layout/AppHeader.tsx`
- Or user profile dropdown
- Or settings page

### Step 5: Persist Theme

Ensure theme choice persists in localStorage (next-themes does this automatically).

### Step 6: Test All Pages

- Toggle theme on dashboard
- Navigate to other pages - theme should persist
- Verify all components respond to theme change
- Check contrast ratios in both themes

## Success Criteria

- [ ] Theme toggle button visible in UI
- [ ] Clicking toggles between light/dark
- [ ] Theme persists across page navigation
- [ ] Theme persists across browser sessions
- [ ] All components respond to theme change
- [ ] All tests passing
- [ ] Zero TypeScript errors

---

**Last Updated:** November 30, 2025
