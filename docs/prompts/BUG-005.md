# BUG-005: Command Palette (Cmd+K) Not Responding

<!-- METADATA (for validation) -->
<!-- TASK_ID: BUG-005 -->
<!-- TASK_TITLE: Fix Command Palette Shortcut -->
<!-- PROMPT_VERSION: 1.0 -->
<!-- LAST_VALIDATED: 2025-11-22 -->

**Repository:** https://github.com/EvanTenenbaum/TERP  
**Task ID:** BUG-005  
**Priority:** P2 (MEDIUM - UX ENHANCEMENT)  
**Estimated Time:** 2-3 hours  
**Module:** Navigation / UX

---

## ðŸŽ¯ Context

**Problem:**
Pressing `Cmd+K` (or `Ctrl+K`) does not open the command palette.

**Goal:**
Fix the keyboard event listener to ensure the command palette opens reliably.

---

## Phase 1: Investigation & Fix

### Step 1.1: Locate Component
1. Search for "Command" or "Palette" in `client/src/components/`.
2. Check `AppHeader.tsx` or `AppShell.tsx` where it might be mounted.

### Step 1.2: Check Event Listeners
1. Look for `useEffect` hooks adding `keydown` listeners.
2. Verify the logic:
   ```typescript
   if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
     e.preventDefault();
     setOpen((open) => !open);
   }
   ```
3. **Common Issue:** The event listener might be attached to a specific element instead of `window` or `document`.
4. **Common Issue:** Another component might be stopping propagation.

### Step 1.3: Implement Fix
1. Ensure the listener is attached to `document`.
2. Ensure `e.preventDefault()` is called to stop browser default behavior (like search focus).
3. Verify `cmdk` or similar library is correctly installed and configured.

### Step 1.4: Verify
1. Press `Cmd+K` on Mac or `Ctrl+K` on Windows/Linux.
2. Verify the palette opens.
3. Verify it closes on `Esc`.

---

## Phase 2: Completion

### Step 2.1: Commit
```bash
git add .
git commit -m "Fix BUG-005: Command palette keyboard shortcut"
git push origin bug-005-fix:main
```

### Step 2.2: Update Roadmap
- Mark `BUG-005` as `âœ… COMPLETE`.
