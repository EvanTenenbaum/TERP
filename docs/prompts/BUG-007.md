# BUG-007: Analytics Data Not Populated

<!-- METADATA (for validation) -->
<!-- TASK_ID: BUG-007 -->
<!-- TASK_TITLE: Fix Analytics Data Population -->
<!-- PROMPT_VERSION: 1.0 -->
<!-- LAST_VALIDATED: 2025-11-22 -->

**Repository:** https://github.com/EvanTenenbaum/TERP  
**Task ID:** BUG-007  
**Priority:** P2 (MEDIUM - FEATURE INCOMPLETE)  
**Estimated Time:** 4-6 hours  
**Module:** Analytics

---

## ðŸŽ¯ Context

**Problem:**
Analytics page shows all metrics as $0.00 or 0, despite data existing in the database.

**Goal:**
Connect the Analytics frontend to the backend API to display real business intelligence data.

---

## Phase 1: Investigation

### Step 1.1: Check Backend API
1. Locate `server/routers/analytics.ts` (or similar).
2. Verify if endpoints exist for:
   - Revenue
   - Orders count
   - Client count
   - Inventory count
3. Test endpoints using a script or logging.

### Step 1.2: Check Frontend Integration
1. Open `client/src/pages/AnalyticsPage.tsx`.
2. Check how data is fetched (tRPC queries?).
3. Verify if it's using mocked data or real queries.

---

## Phase 2: Implementation

### Step 2.1: Connect Data
1. If endpoints exist, ensure frontend calls them correctly.
2. If endpoints are missing, implement aggregation queries in `server/routers/analytics.ts`.
   - Use `COUNT`, `SUM` SQL queries via Drizzle.
   - Example: `db.select({ count: count() }).from(orders)`

### Step 2.2: Remove Placeholders
1. Remove hardcoded "0" or placeholder text.
2. Remove "Analytics data coming soon" banner if functionality is working.

### Step 2.3: Verify
1. Check `/analytics`.
2. Verify numbers match database (e.g., 26 orders, 68 clients).

---

## Phase 3: Completion

### Step 3.1: Commit
```bash
git add .
git commit -m "Fix BUG-007: Connect analytics to real data"
git push origin bug-007-fix:main
```

### Step 3.2: Update Roadmap
- Mark `BUG-007` as `âœ… COMPLETE`.
