# BUG-105: Fix Reports Page 404 Error

<!-- METADATA (for validation) -->
<!-- TASK_ID: BUG-105 -->
<!-- TASK_TITLE: Fix Reports Page 404 Error -->
<!-- PROMPT_VERSION: 1.0 -->
<!-- LAST_VALIDATED: 2026-01-25 -->

**Repository:** https://github.com/EvanTenenbaum/TERP  
**Task ID:** BUG-105  
**Estimated Time:** 4h  
**Module:** `client/src/pages/Reports.tsx`, `client/src/router.tsx`

‚ö†Ô∏è **SECURITY WARNING**

- NEVER include real secrets in this prompt
- Use placeholders like: `YOUR_API_KEY_HERE`
- Secrets belong in `.env` file only

---

## üìã Table of Contents

1. [Context](#context)
2. [Phase 1: Pre-Flight Check](#phase-1-pre-flight-check)
3. [Phase 2: Session Startup](#phase-2-session-startup)
4. [Phase 3: Development](#phase-3-development)
5. [Phase 4: Completion](#phase-4-completion)
6. [Quick Reference](#quick-reference)
7. [Troubleshooting](#troubleshooting)

---

## üéØ Context

**Background:**
During Frontend QA testing on Jan 25, 2026, it was discovered that the Reports link in the Finance navigation menu leads to a 404 page at `/accounting/reports`. The navigation link exists but the page/route is not implemented.

**Goal:**
Either implement the Reports page or fix the route configuration to point to an existing reports functionality.

**Success Criteria:**

- Reports page loads without 404 error
- Reports page displays relevant financial reporting options
- Navigation link works correctly
- Page is accessible to users with appropriate permissions

---

## Implementation Guide

### Step 1: Investigate Current State

1. Check if Reports page component exists
2. Check route configuration for `/accounting/reports`
3. Determine if this is a missing route or missing page
4. Review what reporting functionality should be available

### Step 2: Determine Implementation Approach

**Option A: Route is missing**
- Add route to router configuration
- Point to existing Reports component

**Option B: Page is missing**
- Create new Reports page component
- Add route configuration
- Implement basic reporting UI

**Option C: Navigation link is incorrect**
- Update navigation link to correct route
- Remove or hide link if feature not ready

### Step 3: Implementation

If creating a new page:

```typescript
// client/src/pages/accounting/Reports.tsx
export function ReportsPage() {
  return (
    <PageLayout title="Financial Reports">
      <div className="space-y-4">
        <h2>Available Reports</h2>
        {/* Report options */}
      </div>
    </PageLayout>
  );
}
```

If adding route:

```typescript
// In router configuration
{
  path: '/accounting/reports',
  element: <ReportsPage />,
}
```

### Step 4: Add Permission Check

Ensure appropriate RBAC permissions:
- Finance users should have access
- Sales users may have limited access
- Implement permission middleware if needed

### Step 5: Test

1. Navigate via Finance menu
2. Navigate via direct URL
3. Test with different user roles
4. Verify no 404 errors

---

## Phase 1: Pre-Flight Check

**Objective:** Verify environment and check for conflicts BEFORE starting work.

### Step 1.1: Register Your Session

1. Create session file: `docs/sessions/active/Session-[DATE]-[NUMBER].md`
2. Use template: `docs/templates/SESSION_TEMPLATE.md`
3. Fill in your session details.

### Step 1.2: Register Session (Atomic) ‚ö†Ô∏è CRITICAL

**This step prevents race conditions. Follow it exactly.**

1.  `git pull origin main` (to get the latest `ACTIVE_SESSIONS.md`)
2.  Read `docs/ACTIVE_SESSIONS.md` and check for module conflicts.
3.  If clear, add your session to the file.
4.  Commit and push **immediately**:
    ```bash
    git add docs/ACTIVE_SESSIONS.md
    git commit -m "Register session for BUG-105"
    git push origin main
    ```

---

## Phase 2: Session Startup

**Objective:** Set up your workspace and update the roadmap.

### Step 2.1: Create Feature Branch

```bash
git checkout main
git pull origin main
git checkout -b fix/BUG-105-reports-page-404
```

### Step 2.2: Update Roadmap Status

**File:** `docs/roadmaps/MASTER_ROADMAP.md`

Change the status of BUG-105 to `in-progress`.

---

## Phase 3: Development

**Objective:** Fix the Reports page 404 error.

1. Investigate current state of Reports page/route
2. Determine appropriate implementation approach
3. Implement fix (add route, create page, or fix navigation)
4. Add permission checks
5. Test all access scenarios

---

## Phase 4: Completion

**Objective:** Finalize your work and submit it for review.

### Step 4.1: Verify All Deliverables

- [ ] Reports page accessible via navigation
- [ ] Reports page accessible via direct URL
- [ ] No 404 error
- [ ] Appropriate permissions enforced
- [ ] All tests pass

### Step 4.2: Create Completion Report

Use the template at `docs/templates/COMPLETION_REPORT_TEMPLATE.md`.

### Step 4.3: Update Roadmap to `complete`

Change the status of BUG-105 to `complete` in `docs/roadmaps/MASTER_ROADMAP.md`.

---

## ‚ö° Quick Reference

**Files to investigate/modify:**
- `client/src/router.tsx`
- `client/src/pages/accounting/Reports.tsx` (may need to create)
- `client/src/components/navigation/` (navigation configuration)

**Related routes:**
- `/accounting/invoices` - working
- `/accounting/arap` - also 404 (see BUG-106)

---

## üÜò Troubleshooting

**Issue:** Route exists but page doesn't load
**Solution:** Check lazy loading configuration and component exports

**Issue:** Permission denied after fix
**Solution:** Verify RBAC permissions for reports access

**Issue:** Navigation link not updating
**Solution:** Check navigation configuration and rebuild
