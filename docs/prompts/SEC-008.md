# SEC-008: Protect Settings Router Mutations

## Implementation Guide

### Problem
The `settings.ts` router uses `publicProcedure` for all CRUD mutations on grades, categories, subcategories, and locations - allowing anyone to corrupt master data without authentication.

### Affected Endpoints
**Grades:**
- `create` (line ~17)
- `update` (line ~25)
- `delete` (line ~34)

**Categories:**
- `create` (line ~51)
- `update` (line ~59)
- `delete` (line ~68)

**Subcategories:**
- `create` (line ~90)
- `update` (line ~102)
- `delete` (line ~111)

**Locations:**
- `create` (line ~128)
- `update` (line ~136)
- `delete` (line ~145)

### Solution
1. Import `adminProcedure` or `protectedProcedure` with permission middleware
2. Replace all `publicProcedure` with `adminProcedure` for master data management
3. This is admin-level configuration that should require elevated privileges

### Files to Modify
- `server/routers/settings.ts`

### Verification
```bash
grep "publicProcedure" server/routers/settings.ts
# Should return no results after fix
```

### Acceptance Criteria
- All settings mutations require admin authentication
- Non-admin users receive 403 Forbidden
- Existing admin functionality preserved
