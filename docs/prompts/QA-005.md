# QA-005: Investigate and Fix Systemic Data Access Issues

**Repository:** https://github.com/EvanTenenbaum/TERP  
**Task ID:** QA-005  
**Priority:** P0  
**Estimated Time:** 16-24 hours  
**Module:** Multiple modules  
**Dependencies:** None

---

## ðŸ“‹ Task Description

Widespread "No data found" messages across all modules despite UI expecting data. This appears to be a systemic authentication, authorization, or database connection issue.

**Symptoms:**

- Orders module shows 4,400 total orders in metrics but 0 in table
- Inventory shows $96M value but "No inventory found"
- Clients shows "No clients found"
- All data tables are empty

**Root Cause Investigation Required:**

1. Check database connection and credentials
2. Verify authentication/authorization middleware
3. Check API endpoint responses
4. Verify user permissions and roles
5. Check database seeding/migration status

---

## ðŸš€ 4-Phase Execution Protocol

Follow this protocol exactly. See `docs/ROADMAP_AGENT_GUIDE.md` for complete details.

### Phase 1: Pre-Flight Check (5-10 minutes)

**Objective:** Register your session and verify no conflicts.

**Steps:**

1. **Clone the repository:**

   ```bash
   git clone https://github.com/EvanTenenbaum/TERP.git
   cd TERP
   pnpm install
   ```

2. **Read the roadmap:**

   ```bash
   cat docs/roadmaps/MASTER_ROADMAP.md | grep -A 20 "QA-005"
   ```

3. **Check for conflicts:**

   ```bash
   cat docs/ACTIVE_SESSIONS.md
   ```

   If another agent is working on the same module, STOP and coordinate.

4. **Create session file:**
   ```bash
   SESSION_ID="Session-$(date +%Y%m%d)-QA-005-$(openssl rand -hex 4)"
   cat > "docs/sessions/active/${SESSION_ID}.md" << 'EOF'
   ```

# QA-005: Investigate and Fix Systemic Data Access Issues

**Agent:** [Your name/ID]
**Started:** $(date +%Y-%m-%d)
**Status:** In Progress

## Progress

- [ ] Phase 1: Pre-flight check complete
- [ ] Phase 2: Implementation complete
- [ ] Phase 3: Testing complete
- [ ] Phase 4: Roadmap updated and pushed

## Notes

[Add notes here as you work]
EOF

````

5. **Register session atomically:**
```bash
git pull origin main
echo "- QA-005: ${SESSION_ID} ($(date +%Y-%m-%d))" >> docs/ACTIVE_SESSIONS.md
git add docs/ACTIVE_SESSIONS.md docs/sessions/active/${SESSION_ID}.md
git commit -m "Register session for QA-005"
git push origin main
````

**If push fails:** Another agent registered first. Pull, check conflicts, try again.

---

### Phase 2: Implementation (16-24 hours)

**Objective:** Complete the task following TDD principles.

**Steps:**

1. **Create feature branch:**

   ```bash
   git checkout -b qa-005-fix
   ```

2. **Implement the solution:**
   - Write tests first (TDD)
   - Implement the fix
   - Ensure all tests pass
   - Follow existing code patterns

3. **Test thoroughly:**

   ```bash
   pnpm test
   pnpm check
   ```

4. **Commit frequently:**
   ```bash
   git add -A
   git commit -m "QA-005: [Description of change]"
   ```

---

### Phase 3: Verification (15-30 minutes)

**Objective:** Ensure quality and completeness.

**Checklist:**

- [ ] All tests passing (`pnpm test`)
- [ ] Zero TypeScript errors (`pnpm check`)
- [ ] Zero ESLint warnings
- [ ] Code follows project conventions
- [ ] Changes are well-documented
- [ ] No console.log or debug code
- [ ] Performance is acceptable

**Create completion report:**

```bash
cat > "docs/QA-005-COMPLETION-REPORT.md" << 'EOF'
# QA-005 Completion Report

**Task:** Investigate and Fix Systemic Data Access Issues
**Completed:** $(date +%Y-%m-%d)
**Agent:** [Your name/ID]

## Summary

[Brief summary of what was done]

## Changes Made

- [List key changes]

## Testing

- [Describe testing performed]

## Notes

- [Any important notes or caveats]
EOF
```

---

### Phase 4: Completion (10-15 minutes)

**Objective:** Update roadmap and push to main.

**Steps:**

1. **Update roadmap status:**

   Edit `docs/roadmaps/MASTER_ROADMAP.md` and find your task:

   **Change from:**

   ```markdown
   **Priority:** P0 | **Status:** Not Started | **Effort:** 16-24 hours
   ```

   **Change to:**

   ```markdown
   **Priority:** P0 | **Status:** âœ… Complete (2025-11-14) | **Effort:** 16-24 hours

   **Resolution:** [Brief summary of what was done]
   See docs/QA-005-COMPLETION-REPORT.md for details.
   ```

2. **Archive session file:**

   ```bash
   mv docs/sessions/active/${SESSION_ID}.md docs/sessions/completed/
   ```

3. **Update ACTIVE_SESSIONS.md:**

   Remove your session entry from `docs/ACTIVE_SESSIONS.md`.

4. **Commit all changes:**
   ```bash
   git add -A
   git commit -m "Complete QA-005: Investigate and Fix Systemic Data Access Issues
   ```

- [Brief description of changes]
- All tests passing
- Roadmap updated
- Session archived"
  ```

  ```

5. **Push directly to main:**

   ```bash
   git push origin qa-005-fix:main
   ```

   **DO NOT create a pull request.** Push directly to main.

6. **Verify deployment:**

   Check that your changes are live on main and deployment succeeded.

---

## âœ… Success Criteria

- [ ] Task implementation complete
- [ ] All tests passing
- [ ] Zero errors or warnings
- [ ] Completion report created
- [ ] Roadmap updated to "âœ… Complete"
- [ ] Session archived
- [ ] Changes pushed to main
- [ ] Deployment successful

---

## ðŸ“š Additional Resources

- **Roadmap Agent Guide:** `docs/ROADMAP_AGENT_GUIDE.md`
- **Master Roadmap:** `docs/roadmaps/MASTER_ROADMAP.md`
- **Session Template:** `docs/templates/SESSION_TEMPLATE.md`
- **Completion Template:** `docs/templates/COMPLETION_REPORT_TEMPLATE.md`

---

**Generated:** 2025-11-14  
**Generator:** scripts/generate-prompts.ts
