# ST-030: Mega QA - Deterministic Must-Hit Suite (Baseline Gate)

## Context

Mega QA needs deterministic “must-hit” tests to guarantee coverage closure independent of randomness.

## Implementation Guide

- Create `tests-e2e/mega/must-hit.spec.ts` (and split into multiple specs if needed).
- Each test should emit coverage tags that map to the contract (TS tags, routes, APIs).
- Cover at minimum:
  - TS-001 shortcuts (Cmd+K flows)
  - TS-002 theme toggle persistence
  - Auth flows + protected routes
  - Dashboard + analytics route
  - Inventory + accounting + sales/orders + CRM + supply chain + tasks/calendar + settings/RBAC + VIP portal (at least one deterministic touch per domain)
  - 404 handling
  - “recent work regressions”: `/search`, `/todo-lists`, layout consistency, “spinner/crash class” smoke
- Ensure tests are stable by using page objects and deterministic waits (no healing).

## Acceptance Notes (for AI-only review)

- Must-hit suite should close 100% of required tags when combined with route/API coverage checks.
- Any failures must include trace/screenshot and replay metadata.
