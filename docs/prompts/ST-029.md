# ST-029: Mega QA - Coverage Contract Generator (TS Protocols + Routes + Backend Surface)

## Context

“Guaranteed coverage” requires an explicit contract that Mega QA must satisfy. This contract must be generated from sources of truth (protocol doc, router surfaces).

## Implementation Guide

- Parse `docs/testing/EXHAUSTIVE_INTERACTION_PROTOCOLS.md` into TS tags (`TS-001`…`TS-15.x`) and required actions.
- Extract frontend route surface from the router (or route table) into route tags (e.g., `route:/orders`).
- Extract backend procedure surface:
  - Enumerate tRPC procedures (path + auth requirements) and any REST endpoints used by the app.
  - Create API tags (e.g., `api:orders.create`).
- Emit `required-tags.json` and `waivers.json` (with required rationale fields).
- Provide a comparator that generates `coverage.json` from required vs hit vs waived.
- Add a gate: Mega QA fails if any required tag is missing and not waived.
- Include explicit regression tags for: search route, todo lists route, cmd+k, theme, layout consistency, spinner/crash class, analytics wiring.

## Acceptance Notes (for AI-only review)

- The contract generation must be deterministic (same git SHA → same required tags).
- Waivers must be explicit and justified (no silent skips).
