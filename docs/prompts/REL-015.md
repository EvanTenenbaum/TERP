# REL-015: Observability for Critical Mutations (Correlation IDs + Structured Logging + Sentry Tagging)

<!-- METADATA (for validation) -->
<!-- TASK_ID: REL-015 -->
<!-- TASK_TITLE: Observability for Critical Mutations -->
<!-- PROMPT_VERSION: 1.0 -->
<!-- LAST_VALIDATED: 2026-01-08 -->

**Repository:** https://github.com/EvanTenenbaum/TERP  
**Task ID:** REL-015  
**Estimated Time:** 16h  
**Module:** `server/_core/logger.ts`, `server/_core/requestLogger.ts`, `server/_core/monitoring.ts`

## Implementation Guide

### Problem
Root-cause is slow without consistent correlation IDs and structured logs across critical mutations.

### Solution
- Add correlationId/mutationId to request context.
- Ensure critical mutation wrapper emits structured logs:
  - actor, permission, entity refs, idempotencyKey, before/after summary
- Add Sentry breadcrumbs/tags for critical mutation events.

### Deliverables
- correlationId/mutationId added to request context
- Structured log schema documented and enforced
- Critical mutations emit standardized log events
- Sentry tags set for inventory/money critical events
- Troubleshooting runbook added under `docs/reliability/`

### Acceptance Criteria
- Every P0 mutation emits standardized structured log events.
- Sentry contains tags to filter by module and mutation type.
