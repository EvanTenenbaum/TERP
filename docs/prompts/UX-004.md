# UX-004: Coordinate Loading States on Multi-Query Pages

## Implementation Guide

### Problem
Pages with multiple queries (like ClientProfilePage with client, transactions, activities) show inconsistent loading states. Partial data displayed during loading causes confusion.

### Affected Pages
- `ClientProfilePage.tsx` (3+ queries)
- `Inventory.tsx` (multiple queries)
- Dashboard pages

### Solution
1. Create unified loading hook for multiple queries
2. Show skeleton loading state until all critical data loaded
3. Progressive loading for non-critical data

### Files to Create/Modify
- Create `client/src/hooks/useMultiQueryLoading.ts`
- Update affected pages

### Implementation
```typescript
// useMultiQueryLoading.ts
export function useMultiQueryLoading(queries: UseQueryResult[]) {
  const isLoading = queries.some(q => q.isLoading);
  const isError = queries.some(q => q.isError);
  const errors = queries.filter(q => q.isError).map(q => q.error);

  return { isLoading, isError, errors };
}

// Usage
const clientQuery = trpc.clients.getById.useQuery(id);
const transactionsQuery = trpc.clients.transactions.list.useQuery(id);

const { isLoading } = useMultiQueryLoading([clientQuery, transactionsQuery]);

if (isLoading) return <PageSkeleton />;
```

### Acceptance Criteria
- Unified loading state across related queries
- Skeleton UI during loading
- No partial/inconsistent data display
